language: python

sudo: false

env:
  global:
  - LILYPOND_URL="http://lilypond.org/downloads/binaries/linux-64/"
  - LILYPOND_VERSION=2.19.65

python:
- 3.6

addons:
  apt:
    packages:
    - ghostscript
    - graphviz
    - imagemagick
    - lmodern
    - pgf
    - texlive
    - texlive-extra-utils
    - texlive-fonts-recommended
    - texlive-latex-extra
    - texlive-latex-recommended
    - texlive-pictures
    - texlive-xetex

before_install:
- wget -q ${LILYPOND_URL}lilypond-${LILYPOND_VERSION}-1.linux-64.sh
- sh lilypond-$LILYPOND_VERSION-1.linux-64.sh --batch
- export PATH=/home/travis/bin:$PATH
- pip install -U pip coverage mypy
- pip install https://github.com/Abjad/abjad/archive/master.zip
- pip install https://github.com/josiah-wolf-oberholtzer/uqbar/archive/master.zip
- pip install --target /tmp/typehints https://github.com/Abjad/abjad/archive/master.zip
- pip install --target /tmp/typehints https://github.com/josiah-wolf-oberholtzer/uqbar/archive/master.zip
- export MYPYPATH=/tmp/typehints

install:
- pip install -e .

script:
- py.test
- mypy abjadext/cli
